{
  "hash": "bfb155c010a8f67721757396ff911ef0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Nonparametric Regression\"\nformat:\n  revealjs:\n    scrollable: true\n    navigation-mode: vertical\n    controls-layout: bottom-right\n    controls-tutorial: true\n    incremental: false \n    chalkboard:\n      src: chalkboard.json\n      storage: chalkboard_pres\n      theme: whiteboard\n      chalk-width: 4\nknitr:\n  opts_chunk: \n    echo: true\n    code-fold: true\n    eval: true\n    message: false\n    warnings: false\n    comment: \"#>\" \n    \nrevealjs-plugins:\n  - pointer\n  - verticator\n  \nfilters: \n  - reveal-header\n  - code-fullscreen\n  - reveal-auto-agenda\n\neditor: visual\n---\n\n\n# Motivating Example\n\n## Plot\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\nx <- rnorm(1000, sd = 0.25)\ny <- 1 + 5.3 * x - 45 * x^2 - 35.5 * x^3 + 60 * x^4 + rnorm(1000, sd = 0.5)\nggplot(tibble(x=x, y=y), aes(x,y)) + geom_point() + theme_bw()\n```\n\n::: {.cell-output-display}\n![](12b_files/figure-revealjs/unnamed-chunk-1-1.png){width=960}\n:::\n:::\n\n## Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\nx <- rnorm(1000, sd = 3.5)\ny <- 1 + sinpi(x/8) + rnorm(1000, sd = 0.25)\nggplot(tibble(x=x, y=y), aes(x,y)) + geom_point() + theme_bw()\n```\n\n::: {.cell-output-display}\n![](12b_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n\n\n# Smoothing Splines\n\n## Regression Splines\n\nFor $L$ knots:\n\n$$\nY = \\beta_0 + \\sum^p_{j=1}x^j\\beta_j + \\sum_{l=1}^L \\beta_{p+l}(x - \\xi_l)^p_+ + \\varepsilon\n$$\n\n## Issues with Regression Splines\n\n::: incremental\n-   Must specify a correct number of knots\n-   Must specify the correct location of knots\n-   Must specify the degree p\n:::\n\n## Solutions\n\n::: incremental\n-   Use $p=3$, performs the best\n-   Implement a penalty term\n:::\n\n## Smooting Parameter\n\nA smoothing (penalty) parameter will allow us to specify a large number of knots to grid up the range of `X`.\n\n::: fragment\nThe smoothing parameter will will force the effect of certain knots to zero that are not relevant.\n:::\n\n::: fragment\nAs long as we choose a high number of knots (20-30), it will properly model the data without the worry of overfitting.\n:::\n\n::: fragment\nThe smoothing parameter can be estimated by using a cross-validation approach and identifying the which values lowers the MSE.\n:::\n\n## Likelihood Function\n\n$$\n\\sum^n_{i=1}\\{Y_i-g(X_i)\\}^2 + \\lambda\\int g^{\\prime\\prime}(t)^2dt\n$$\n\n-   $g(\\cdot)$: function used to model data (using cubic splines)\n-   $\\lambda$: smoothing parameter\n\n## Smoothing Splines in R\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nsmooth.spline(x, # Vector of predictor\n              y, # Vector of outcome\n              cv = TRUE, # Indicates to use LOOCV\n              nknots) # number of knots; can use default\n```\n:::\n\n\n## Example\n\nFit a smoothing spline model with the following simulated data. Search through the help documentation to print out $\\lambda$.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\nx <- rnorm(1000, sd = 0.25)\ny <- 1 + 5.3 * x - 45 * x^2 - 35.5 * x^3 + 60 * x^4 + rnorm(1000, sd = 0.5)\n```\n:::\n\n# Local Regression\n\n\n\n## Local Models\n\nLocal models will construct a curve to model the data based on a set of given grid points.\n\n::: fragment\nThe grid points are selected by taking the range of `X` and choosing values that are equidistant from each other in `X`.\n:::\n\n::: fragment\nAt each grid point, fit a model based on the data points within its neighborhood.\n:::\n\n::: fragment\nData points closer to each grid point will have more importance than data points further away.\n:::\n\n## Local Neighborhood\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nx <- rnorm(1000, sd = 0.25)\ny <- 1 + 5.3 * x - 45 * x^2 - 35.5 * x^3 + 60 * x^4 + rnorm(1000, sd = 0.5)\nxx <- seq(from = range(x)[1], to = range(x)[2], by = 0.3)\n\nggplot(tibble(x=x, y=y), aes(x,y)) + \n  geom_point() +\n  geom_vline(xintercept = xx, col = \"red\", lty = 2) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](12b_files/figure-revealjs/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n\n## Importance (Weights)\n\n\n## Local Constant Model\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nx <- rnorm(1000, sd = 0.25)\ny <- 1 + 5.3 * x - 45 * x^2 - 35.5 * x^3 + 60 * x^4 + rnorm(1000, sd = 0.5)\nggplot(tibble(x=x, y=y), aes(x,y)) + \n  geom_point() +\n  stat_smooth(method = stats::loess, \n              method.args = list(degree = 0,\n                                 span = 0.05)) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](12b_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Local Linear Model\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nx <- rnorm(1000, sd = 0.25)\ny <- 1 + 5.3 * x - 45 * x^2 - 35.5 * x^3 + 60 * x^4 + rnorm(1000, sd = 0.5)\nggplot(tibble(x=x, y=y), aes(x,y)) + \n  geom_point() +\n  stat_smooth(method = stats::loess, \n              method.args = list(degree = 1,\n                                 span = 0.05)) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](12b_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n## Local Regression\n\n# Generalized Additive Models\n\n",
    "supporting": [
      "12b_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}
{
  "hash": "fafc20ee220ba1e0e054519fffd13323",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Correlation, Confounding, and Interaction Terms\"\nformat:\n  revealjs:\n    scrollable: true\n    navigation-mode: vertical\n    controls-layout: bottom-right\n    controls-tutorial: true\n    incremental: false \n    chalkboard:\n      src: chalkboard.json\n      storage: chalkboard_pres\n      theme: whiteboard\n      chalk-width: 4\nknitr:\n  opts_chunk: \n    echo: false\n    eval: false\n    message: false\n    warnings: false\n    comment: \"#>\" \n\neditor: visual\n---\n\n\n\n\n## Learning Objectives\n\n-   Correlation vs Causation\n\n-   Confounding Variables\n\n-   Interaction Terms\n\n# Correlation vs Causation\n\n## Correlation vs Causation\n\nWhen 2 variables are associated with each other, this does not necessarily mean that one causes the other component.\n\n## Correlation vs Causation\n\nLooking at `body_mass_g` and `flipper_length_mm`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\npenguins %<>% drop_na\npenguins %$% lm(body_mass_g ~ flipper_length_mm)\npenguins %$% lm(flipper_length_mm ~ body_mass_g)\n```\n:::\n\n\n## Correlation vs Causation\n\nLooking at `body_mass_g` and `flipper_length_mm`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\npenguins %<>% drop_na\npenguins %$% lm(body_mass_g ~ flipper_length_mm)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> \n#> Call:\n#> lm(formula = body_mass_g ~ flipper_length_mm)\n#> \n#> Coefficients:\n#>       (Intercept)  flipper_length_mm  \n#>          -5872.09              50.15\n```\n\n\n:::\n\n```{.r .cell-code}\npenguins %$% lm(flipper_length_mm ~ body_mass_g)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> \n#> Call:\n#> lm(formula = flipper_length_mm ~ body_mass_g)\n#> \n#> Coefficients:\n#> (Intercept)  body_mass_g  \n#>    137.0396       0.0152\n```\n\n\n:::\n:::\n\n\n## Correlation vs Causation\n\nIn observation studies, we cannot claim any one factor causes an outcome. At best we can claim things are associated with each other. To determine causation, a criteria is followed, randomized-controlled trials, or causal inference methods.\n\n# Confounding Variables\n\n## Confounding Variables\n\nConfounding variables are tertiary variables that may cause an association between two variables when one does not exist.\n\n## Confounding Variable Example\n\nAs ice cream sales increase, the number of shark attacks increase.\n\n## Confounding Variables\n\n![Source: Statology](img/confound2.png){fig-alt=\"Showing how confounding variables are related to both the independent and dependent variable.\" fig-align=\"center\"}\n\n## Simulation example\n\n\n::: {.cell}\n\n```{.r .cell-code}\nz <- rnorm(1000, mean = 8)\nxy <- sapply(z, \\(.) mvtnorm::rmvnorm(1000, .*c(1,1), \n                                      matrix(c(1,0,0,1), nrow = 2)))\nlm(xy[1,]~xy[2,]) %>% summary\nlm(xy[1,]~xy[2,] + z) %>% summary\n```\n:::\n\n\n## Simulation Example\n\n\n::: {.cell}\n\n```{.r .cell-code}\nz <- rnorm(1000, mean = 8)\nxy <- sapply(z, \\(.) mvtnorm::rmvnorm(1000, .*c(1,1), \n                                      matrix(c(1,0,0,1), nrow = 2)))\nlm(xy[1,]~xy[2,]) %>% summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> \n#> Call:\n#> lm(formula = xy[1, ] ~ xy[2, ])\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -3.7593 -0.8149 -0.0495  0.8007  3.6919 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  4.13655    0.22084   18.73   <2e-16 ***\n#> xy[2, ]      0.48845    0.02724   17.93   <2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 1.204 on 998 degrees of freedom\n#> Multiple R-squared:  0.2436,\tAdjusted R-squared:  0.2429 \n#> F-statistic: 321.4 on 1 and 998 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n\n```{.r .cell-code}\nlm(xy[1,]~xy[2,] + z) %>% summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> \n#> Call:\n#> lm(formula = xy[1, ] ~ xy[2, ] + z)\n#> \n#> Residuals:\n#>      Min       1Q   Median       3Q      Max \n#> -2.82669 -0.68235 -0.00892  0.67156  2.87038 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  0.39574    0.24563   1.611    0.107    \n#> xy[2, ]     -0.02696    0.03199  -0.843    0.399    \n#> z            0.98284    0.04386  22.409   <2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 0.9826 on 997 degrees of freedom\n#> Multiple R-squared:  0.497,\tAdjusted R-squared:  0.496 \n#> F-statistic: 492.5 on 2 and 997 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n\n\n## Activity\n\nCome up with examples that may have confounding variables.\n\n## Confounding Variables\n\nHow would we adjust for confounding variables?\n\n# Interaction Terms\n\n## Interaction Terms\n\nAn interaction occurs when the independent variable effect on an outcome variable varies based on a value of a third variable.\n\n## Interaction Terms\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- rnorm(1000, mean = 8)\nz <- sample(c(0,1), 1000, replace = T)\ny <- -4 + 3 * x - 5 * z + x*z + rnorm(1000, 2)\ndf <- tibble(x, y, z)\nggplot(df, aes(x,y)) + geom_point()+\n  geom_smooth(method = \"lm\", se = F) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](7a_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n## Interaction Terms\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- rnorm(1000, mean = 8)\nz <- sample(c(0,1), 1000, replace = T)\ny <- -4 + 3 * x -5 * z + x*z + rnorm(1000, 2)\ndf <- tibble(x, y, z)\nggplot(df, aes(x,y, color = z)) + geom_point()+\n  geom_smooth(method = \"lm\", se = F) +\n  geom_smooth(aes(group=z), method = \"lm\", se =F) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](7a_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n## Interaction Terms\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- rnorm(1000, mean = 8)\nz <- sample(c(0,1), 1000, replace = T)\ny <- -4 + 3 * x -5 * z + x*z + rnorm(1000, 2)\ndf <- tibble(x, y, z)\ndf %$% lm(y ~ x*z)\n```\n:::\n",
    "supporting": [
      "7a_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}